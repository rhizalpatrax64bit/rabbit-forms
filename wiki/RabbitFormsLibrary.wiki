#summary This page describle how to use Rabbit Form CI library
#labels Phase-Implementation

= Rabbit Forms Library =

Rabbit Forms library is the way you will use the Rabbit Forms in your application, it's a simple CI Library that parses configuration files and provide a simple comunication between CI and Rabbit Forms core.

== Loading ==

To start using Rabbit Forms library simple load this in your controller

{{{
$this->load->library('rabbitform');
}}}

== Main methods ==

There are three main methods to use the library, they are:

|| *Method* || *Description* ||
|| string run(mixed config[, string rowid]) || This method returns a string containg the html of form generated by params ||
|| string retrieve(mixed config) || This method returns a string containing the html of retrieve view generated by configuration ||
|| void delete(mixed config, string rowid) || This method delete a row data (performing all nescessary proccess describled by fields) ||

== run method ==

Using run method you able to get a partial html that you will use into your site to execute the form, the first param is the configuration and can be passed in two ways:

  * Array - the array data of configuration
  * String - the string containg YAML file to be load

The second parameter is the ID of row to use form in a edit way, the form will be filled with row data and after submit the form will edit that in a place of create a new row.

== retrieve method ==

Using retrieve method you able to get a partial html containing retrieve view data and put in your site, the configuration param works at the same way in method run (see above).

== delete method ==

This method deletes one entry in table, the first argument is the configuration (like the methods above) and the second is ID of element (value in primary key).

== another methods ==

If you need a more customized call you can use the helpers:

|| *Method* || *Description* ||
|| getFormIdentifier || Get the form unique identifier ||
|| prepare_config || Prepare the configuration file (load YML if is string) and merge with default configuration ||
|| prepare_edit || Get the data of row and return array containing data ||
|| prepare_form || Prepare the form object ||
|| loadView || Load the view ||

This methods are incomum in normal use, to know details about them read the source

== Pratical Use ==

In normal cases you will use main methods like this:

{{{
class MyController extends Controller
{
    public function __construct()
    {
        parent::Controller();

        $this->load->library('rabbitform');
    }

    public function manage($id = false)
    {
        $data['content'] = $this->rabbitform->run('formconfig.yml', $id);

        $this->load->view('mySiteMasterPage', $data);
    }

    public function retrieve()
    {
        $data['content'] = $this->rabbitform->retrieve('formconfig.yml', $id);

        $this->load->view('mySiteMasterPage', $data);
    }

    public function delete($id)
    {
        $this->load->helper('url');
        $this->rabbitform->delete('formconfig.yml', $id);

        redirect('MyController/retrieve');
    }
}
}}}

This is only a sample, you can use Rabbit Forms in the way you like.

The sample controller above put html partial content of Rabbit Forms in one variable that is passed to page and be displayed in any part of your site.

== Summary ==

This page describled the use of Rabbit Forms library, using this and the configuration knowledges you are able to create functional CRUD operations, see template customizing to do this in a pretty way